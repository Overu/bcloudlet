define("duokan/store/1/page/../widget/loadmore/loadmore",[],function(a,b,c){var d=a("gallery/jquery/1.8.3/jquery"),e=a("../../core"),f=a("../../common"),g=a("../../business"),h=a("gallery/juicer/0.6.4/juicer"),i=a("../score/score"),j=a("../event"),k=e.create(),l=k.extend(j);l.init=function(a){this.supInit(arguments),this.target=d("#"+a.target)||d(document.body),this.url=a.url,this.args={},this.args.page_length=a.limit||30,this.args.start=a.offset||0,this.args.s=a.search||"",this.more=!0,this.tpl=d("#"+a.tpl).html(),this.__canLoad=!0,d(window).scroll(this._onscroll.bind(this)),this.setEvent("onloadmore",a.onloadmore||this._onloadmore)},l._onscroll=function(){if(this.more){var a=d(document).height(),b=d(window).height(),c=d(window).scrollTop();c+b==a&&(d(".spin").show(),f.loadingIcon(".w-load"),console.log("onscroll->"+this.__canLoad),this.__canLoad&&(console.log("pre send ->"+this.__canLoad),this.__canLoad=!1,this.fireEvent("onloadmore")))}},l._onloadmore=function(){var a=function(a){var b={};for(var c in a)!!a[c]&&(b[c]=a[c]);return b};return function(){var b=a(this.args);g.ajax(this.url,b,this._onajaxsuccess.bind(this),this._onajaxcomplete.bind(this))}}(),l._onajaxsuccess=function(a){h.register("showStar",function(a){return new i(a).toString()}),h.register("imgAdapt",function(a,b){return a.replace(/\!.+/,"!"+b)}),h.register("formatPrice",function(a){return Number(a).toFixed(2)}),h.register("buildAuthor",f.buildAuthor),a.offset=this.args.start,d(h(this.tpl,a)).appendTo(this.target),this.args.start+=a.count,this.more=a.more,!this.search&&this.args.start>300&&(this.more=!1)},l._onajaxcomplete=function(){this.__canLoad=!0,console.log("complete ->"+this.__canLoad),d(".spin").hide(),d(".spin").empty()},c.exports=k}),define("duokan/store/1/page/../core",[],function(a,b){var d=a("gallery/jquery/1.8.3/jquery");b.pushCSSText=function(a){var b=d("<style>"+a+"</style>");d("head").append(b)},b.create=function(){var a=function(){return this.init.apply(this,arguments)};return a.extend=function(a){this._$super=a,this._$supro=a.prototype;var b=function(){};b.prototype=a.prototype,this.prototype=new b;var c=this.prototype;c.constructor=this,c.init=function(){this.supInit.apply(this,arguments)};var d=a;return c.supInit=function(){var b=d.prototype.init;d=d._$super||a,b&&b.apply(this,arguments),d=a},c},a},Function.prototype.aop=function(a,b){var c=function(){return!1},b=b||c,a=a||c,d=this;return function(){var c={args:NEJ.R.slice.call(arguments,0)};return a(c),c.stopped||(c.value=d.apply(this,c.args),b(c)),c.value}}}),define("duokan/store/1/page/../common",[],function(a,b,c){function f(a){return a}function g(a){return decodeURIComponent(a.replace(e," "))}function k(){var a=window.location.host;return a.indexOf("172.27")>=0||a.toLowerCase().indexOf("dkmars")>=0?a:"127.0.0.1"==a?"127.0.0.1":a.toLowerCase().indexOf("localhost")>=0?"localhost":"duokan.com"}var d=a("gallery/jquery/1.8.3/jquery"),e=/\+/g,h=d.cookie=function(a,b,c){if(void 0!==b){if(c=d.extend({},h.defaults,c),null===b&&(c.expires=-1),"number"==typeof c.expires){var e=c.expires,i=c.expires=new Date;i.setDate(i.getDate()+e)}return b=h.json?JSON.stringify(b):String(b),document.cookie=[encodeURIComponent(a),"=",h.raw?b:encodeURIComponent(b),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}for(var m,j=h.raw?f:g,k=document.cookie.split("; "),l=0;m=k[l]&&k[l].split("=");l++)if(j(m.shift())===a){var n=j(m.join("="));return h.json?JSON.parse(n):n}return null};h.defaults={},d.removeCookie=function(a,b){return null!==d.cookie(a)?(d.cookie(a,null,b),!0):!1};var i=!!window.ActiveXObject,j=i&&!window.XMLHttpRequest,l={addCookie:function(a,b,c){c>0?d.cookie(a,b,{expires:c,path:"/"}):d.cookie(a,b,{path:"/"})},getCookie:function(a){return d.cookie(a)},delCookie:function(a){d.removeCookie(a,{path:"/"})},getArgs:function(a){query=location.pathname.substring(1);var c,b=query.split("/");if("title"==a)c=0;else if("book_id"==a){if(window.dk_data&&window.dk_data.book_id)return decodeURIComponent(window.dk_data.book_id);for(var d in b)"b"==b[d]&&(c=parseInt(d)+1)}else if("list_id"==a)for(var d in b)"l"==b[d]&&(c=parseInt(d)+1);else if("press_name"==a)for(var d in b)"p"==b[d]&&(c=parseInt(d)-1);else if("comment_id"==a)for(var d in b)"comment"==b[d]&&(c=parseInt(d)+1);var e=decodeURIComponent(b[c]);return e},getArgs2:function(a){var c,b=new Object;c=2==arguments.length?arguments[1]:location.search.substring(1);for(var d=c.split("&"),e=0;d.length>e;e++){var f=d[e].indexOf("=");if(-1!=f){var g=d[e].substring(0,f),h=d[e].substring(f+1);h=decodeURIComponent(h),b[g]=h}}return b[a]},getArgsByReg:function(a){var b=window.location.href.replace(/https?\:\/\//,""),c=b.match(a);return c.forEach(function(a,b){c[b]=decodeURI(c[b])}),c.shift(),c},getSizeText:function(a){return a>0?a>1e6?(a/1e6).toFixed(2)+"&nbsp;MB":(a/1e3).toFixed(2)+"&nbsp;KB":"未知"},commentLIstUlHeight:null,jQueryAjax:function(a,b){d.ajax({url:a,success:function(a){b(a)},complete:function(){l.commentLIstUlHeight=d(".comment-hot").hasClass("crt")?d("#hottest").height():d("#newest").height()},dataType:"json",type:"get"})},jump:function(a,b,c){window.setTimeout(function(){a--,a>0?(d(b).text(a),l.jump(a,b,c)):document.location=c},1e3)},htmlEncode:function(a){var b="";return 0==a.length?"":(b=a.replace(/&/g,"&amp;"),b=b.replace(/</g,"&lt;"),b=b.replace(/>/g,"&gt;"),b=b.replace(/ /g,"&nbsp;"),b=b.replace(/\'/g,"&#39;"),b=b.replace(/\"/g,"&quot;"),b=b.replace(/\n/g,"<br>"))},removeNickEmail:function(a){return a?a.replace(/@[^\.]+\..+$/,""):a},buildContent:function(a){var b="\n";-1!=a.search("\r\n")&&(b="\r\n");var c=a.split(b),d="",e=new RegExp(b,"g");return c.forEach(function(a,b){if(c[b].length>0){var f=l.htmlEncode(c[b].trim());d+="<p>"+f.replace(e,"</p><p>")+"</p>"}}),d},nbs:/^\s*(\s*?)\s+$/,removepace:function(a,b){d(a).each(function(c){var e=d(a).eq(c).text();if(1==l.nbs.test(e)||""==e){var f=d(this).next("p").text();(0==l.nbs.test(f)||""!=e)&&d(this).next("p").addClass(b),d(a).eq(c).empty().remove()}})},loadingIcon:function(a){var b=new Spinner({lines:12,length:0,width:6,radius:14,corners:1,color:"#333",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",top:0,left:0}),c=d(a+" .spin")[0];return b.spin(c),b},smallLoadingIcon:function(a){var b=new Spinner({lines:12,length:5,width:2,radius:4,color:"#333",speed:1,trail:50,shadow:!1,hwaccel:!1,className:"spinner",top:0,left:0}),c=d(a+" .spin")[0];return b.spin(c),b},showStarLi:function(a){if(2>a){var b="<ul class='five'><li></li><li></li><li></li><li></li><li></li></ul>";return b}if(2.5>a){var b="<ul class='five'><li class=red></li><li></li><li></li><li></li><li></li></ul>";return b}if(3.5>a){var b="<ul class='five'><li class=red></li><li class=halfive></li><li></li><li></li><li></li></ul>";return b}if(4.5>a){var b="<ul class='five'><li class=red></li><li class=red></li><li></li><li></li><li></li></ul>";return b}if(5.5>a){var b="<ul class='five'> <li class=red></li> <li class=red></li> <li class=halfive></li> <li></li> <li></li></ul>";return b}if(6.5>a){var b="<ul class='five'><li class=red></li> <li class=red></li> <li class=red></li> <li></li> <li></li></ul>";return b}if(7.5>a){var b="<ul class='five'><li class=red></li> <li class=red></li> <li class=red></li> <li class=halfive></li> <li></li></ul>";return b}if(8.5>a){var b="<ul class='five'><li class=red></li> <li class=red></li> <li class=red></li> <li class=red></li> <li></li></ul>";return b}if(9.5>a){var b="<ul class='five'><li class=red></li> <li class=red></li> <li class=red></li> <li class=red></li> <li class=halfive></li></ul>";return b}if(10>=a){var b="<ul class='five'><li class=red></li> <li class=red></li> <li class=red></li> <li class=red></li> <li class=red></li> </ul>";return b}var b="<ul class='five'><li></li><li></li><li></li><li></li><li></li></ul>";return b},addBasicCookie:function(a,b,c){c>0?d.cookie(a,b,{expires:c,path:"/",domain:k()}):d.cookie(a,b,{path:"/",domain:k()})},delBasicCookie:function(a){d.removeCookie(a,{path:"/",domain:k()})},generateDeviceID:function(){var a=l.getCookie("device_id");if(null==a||""==a){for(var b="0123456789QWERTYUIOPASDFGHJKLZXCVBNM",c="",d=0;12>d;d++)c+=b.charAt(Math.ceil(1e8*Math.random())%b.length);a="D900"+c}l.addBasicCookie("device_id",a,360),l.addBasicCookie("app_id","web",360)},initialize:function(){l.generateDeviceID(),j&&(d(".m-slider .wrap").bind({mouseenter:function(){d(this).addClass("hover")},mouseleave:function(){d(this).removeClass("hover")}}),d(".m-slider .wrap, .w-booklist, .w-booklist2, w-txtlist").delegate("li",{mouseenter:function(){d(this).addClass("hover")},mouseleave:function(){d(this).removeClass("hover")}}))},buildAuthor:function(a){var a=a||"佚名",b="\n";if(-1!=a.search("\r\n"))var b="\r\n";for(var c="",d=a.split(b),e=d.length>2?2:d.length,f=0;e>f;f++)c+="<span>"+d[f]+"</span>";return d.length>2&&(c+="<span>"+d[2],c+=d.length>3?"&nbsp;等</span>":"</span>"),c},getSizeText:function(a){return a>0?a>1e6?(a/1e6).toFixed(2)+"&nbsp;MB":(a/1e3).toFixed(2)+"&nbsp;KB":"未知"},showStar:function(a){if(0==a.result){if(a.score_count>0)var b=a.score_count+" 个评分";else var b="评分个数不足";d(".num").append(b);var c=a.score;2>c||(2.5>c?d(".book_five .five>li:eq(0)").addClass("red"):3.5>c?(d(".book_five .five>li:eq(0)").addClass("red"),d(".book_five .five>li:eq(1)").addClass("halfive")):4.5>c?d(".book_five .five>li:lt(2)").addClass("red"):5.5>c?(d(".book_five .five>li:lt(2)").addClass("red"),d(".book_five .five>li:eq(2)").addClass("halfive")):6.5>c?d(".book_five .five>li:lt(3)").addClass("red"):7.5>c?(d(".book_five .five>li:lt(3)").addClass("red"),d(".book_five .five>li:eq(3)").addClass("halfive")):8.5>c?d(".book_five .five>li:lt(4)").addClass("red"):9.5>c?(d(".book_five .five>li:lt(4)").addClass("red"),d(".book_five .five>li:eq(4)").addClass("halfive")):10>=c&&d(".book_five .five>li:lt(5)").addClass("red"))}},postioncenter:function(a){var b=(d(window).height()-d(a).height())/2,c=(d(window).width()-d(a).width())/2;0>b&&(b=0),d(a).css({top:b,left:c}),d(window).unbind("resize"),d(window).scroll(function(){var b=(d(window).height()-d(a).height())/2+d(window).scrollTop(),c=(d(window).width()-d(a).width())/2;0>b&&(b=0),d(a).css({top:b,left:c})}),d(window).resize(function(){var b=(d(window).height()-d(a).height())/2,c=(d(window).width()-d(a).width())/2;0>b&&(b=0),d(a).css({top:b,left:c})})},bookpage:function(a,b){var c=Math.ceil(a);d("#total-page").html(c),1>=c&&d(".w-page").hide();for(var e=1;c>=e;e++){if(e>5&&c>e)var f="<li style='display:none'><a>"+e+"</a></li>";else var f="<li><a>"+e+"</a></li>";d("#bookpage-a").append(f)}c>5&&d("#bookpage-a>li").eq(4).after("<li class='ellipsis'>...</li>"),d("#bookpage-a>li").eq(0).addClass("crt"),d(".pre").addClass("init"),d("#bookpage-a").delegate("li","click",function(){if("crt"==d(this).attr("class"))return!1;d(".ellipsis").empty().remove(),d("#bookpage-a>li").not(d("#bookpage-a>li:first")).not(d("#bookpage-a>li:last")).hide();var a=d(this).index(),e=a-2,f=a+3;0>e&&(e=0),d("#bookpage-a>li").slice(e,f).show(),d("#bookpage-a>li:eq(1)").is(":hidden")&&d("#bookpage-a>li:last").prev("li").is(":hidden")?(d("#bookpage-a>li").eq(f).after("<li class='ellipsis'>...</li>"),d("#bookpage-a>li").eq(e).before("<li class='ellipsis'>...</li>")):d("#bookpage-a>li:eq(1)").is(":visible")?5==c&&1==a||d("#bookpage-a>li").eq(f).after("<li class='ellipsis'>...</li>"):d("#bookpage-a>li:last").prev("li").is(":visible")&&d("#bookpage-a>li").eq(e).before("<li class='ellipsis'>...</li>"),d("#bookpage-a>li").removeClass("crt"),d(this).addClass("crt");var g=d(this).text();d("#one-page").html(g),g==c&&c>1?d(".next").addClass("init"):d(".next").removeClass("init"),d(this).index()>0?(comment.start=10*(g-1)+1,book.category.listStart=10*(g-1),d(".pre").removeClass("init")):0==d(this).index()&&(comment.start=1,category.listStart=0,d(".pre").addClass("init"),d(".next").removeClass("init")),"replylist"==b?comment.comment_LIst(10):"commentlist"==b?comment.commentLIst():"category"==b&&category.categoryLIst()}),d(".pre").click(function(){return d(this).hasClass("init")?!1:(d("#bookpage-a>li.crt").prev().click(),void 0)}),d(".next").click(function(){return d(this).hasClass("init")?!1:(d("#bookpage-a>li.crt").next().click(),void 0)})}};c.exports=l}),function(a,b,c){function d(a,c){var e,d=b.createElement(a||"div");for(e in c)d[e]=c[e];return d}function e(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function f(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+100*(c/d),g=Math.max(1-(1-a)/b*(100-f),a),h=m.substring(0,m.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(n.insertRule("@"+i+"keyframes "+e+"{"+"0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}"+"100%{opacity:"+g+"}"+"}",0),l[e]=1),e}function g(a,b){var e,f,d=a.style;if(d[b]!==c)return b;for(b=b.charAt(0).toUpperCase()+b.slice(1),f=0;k.length>f;f++)if(e=k[f]+b,d[e]!==c)return e}function h(a,b){for(var c in b)a.style[g(a,c)||c]=b[c];return a}function i(a){for(var b=1;arguments.length>b;b++){var d=arguments[b];for(var e in d)a[e]===c&&(a[e]=d[e])}return a}function j(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}var m,k=["webkit","Moz","ms","O"],l={},n=function(){var a=d("style");return e(b.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),o={lines:12,length:7,width:5,radius:10,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto"},p=function q(a){return this.spin?(this.opts=i(a||{},q.defaults,o),void 0):new q(a)};p.defaults={},p.prototype={spin:function(a){this.stop();var g,i,b=this,c=b.opts,e=b.el=h(d(0,{className:c.className}),{position:"relative",zIndex:c.zIndex}),f=c.radius+c.length+c.width;if(a&&(a.insertBefore(e,a.firstChild||null),i=j(a),g=j(e),h(e,{left:("auto"==c.left?i.x-g.x+(a.offsetWidth>>1):c.left+f)+"px",top:("auto"==c.top?i.y-g.y+(a.offsetHeight>>1):c.top+f)+"px"})),e.setAttribute("aria-role","progressbar"),b.lines(e,b.opts),!m){var k=0,l=c.fps,n=l/c.speed,o=(1-c.opacity)/(n*c.trail/100),p=n/c.lines;!function q(){k++;for(var a=c.lines;a;a--){var d=Math.max(1-(k+a*p)%n*o,c.opacity);b.opacity(e,c.lines-a,d,c)}b.timeout=b.el&&setTimeout(q,~~(1e3/l))}()}return b},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=c),this},lines:function(a,b){function c(a,c){return h(d(),{position:"absolute",width:b.length+b.width+"px",height:b.width+"px",background:a,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/b.lines*g)+"deg) translate("+b.radius+"px"+",0)",borderRadius:(b.width>>1)+"px"})}for(var i,g=0;b.lines>g;g++)i=h(d(),{position:"absolute",top:1+~(b.width/2)+"px",transform:b.hwaccel?"translate3d(0,0,0)":"",opacity:b.opacity,animation:m&&f(b.opacity,b.trail,g,b.lines)+" "+1/b.speed+"s linear infinite"}),b.shadow&&e(i,h(c("#000","0 0 4px #000"),{top:"2px"})),e(a,e(i,c(b.color,"0 0 1px rgba(0,0,0,.1)")));return a},opacity:function(a,b,c){a.childNodes.length>b&&(a.childNodes[b].style.opacity=c)}},!function(){var b,a=h(d("group"),{behavior:"url(#default#VML)"});if(!g(a,"transform")&&a.adj){for(b=4;b--;)n.addRule(["group","roundrect","fill","stroke"][b],"behavior:url(#default#VML)");p.prototype.lines=function(a,b){function c(){return h(d("group",{coordsize:i+" "+i,coordorigin:-g+" "+-g}),{width:i,height:i})}function f(a,f,i){e(k,e(h(c(),{rotation:360/b.lines*a+"deg",left:~~f}),e(h(d("roundrect",{arcsize:1}),{width:g,height:b.width,left:b.radius,top:-b.width>>1,filter:i}),d("fill",{color:b.color,opacity:b.opacity}),d("stroke",{opacity:0}))))}var l,g=b.length+b.width,i=2*g,j=2*-(b.width+b.length)+"px",k=h(c(),{position:"absolute",top:j,left:j});if(b.shadow)for(l=1;b.lines>=l;l++)f(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;b.lines>=l;l++)f(l);return e(a,k)},p.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&e.childNodes.length>b+d&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}else m=g(a,"animation")}(),a.Spinner=p}(window,document),define("duokan/store/1/page/../business",[],function(a,b){var d=a("gallery/jquery/1.8.3/jquery"),e=a("./util");b.ajax=function(a,b,c,e,f){d.isFunction(b)&&(c=b,e=c,f=e),d.ajax({url:a,data:b,success:c,dataType:"json",type:"get",complete:e,error:f})},b.addSina=function(a,b){var c={url:"http://book.duokan.com/",pic:"",title:"多看精品书城",type:"3",count:"",appkey:"3117897982",ralateUid:"",language:"zh_cn",rnd:+new Date};b=b||window.dk_data.share,c=d.extend(c,b),a.html('<iframe allowTransparency="true" frameborder="0" scrolling="no" src="http://hits.sinajs.cn/A1/weiboshare.html?'+e.object2query(c)+'" width="16" height="16"></iframe>')}}),define("duokan/store/1/page/../util",[],function(a,b){var e=(a("gallery/jquery/1.8.3/jquery"),b);e.object2string=function(a,b,c){if(!a)return"";var d=[];for(var e in a)d.push(encodeURIComponent(e)+"="+(c?encodeURIComponent(a[e]):a[e]));return d.join(b||",")},e.object2query=function(a){return e.object2string(a,"&",!0)},e.string2object=function(a,b){var c={};return(a||"").split(b).forEach(function(a){var b=a.split("=");if(b&&b.length){var d=b.shift();d&&(c[decodeURIComponent(d)]=decodeURIComponent(b.join("=")))}}),c},e.query2object=function(a){return e.string2object(a,"&",!0)},e.parseUrl=function(){var a=/^https?:\/\/.*?\//i,b=/[?#]/;return function(c){var d={href:c};c=(c||"").replace(a,"/").split(b);var f=1;return"/"==c[0]&&0==(c[1]||"").indexOf("/")&&(f=2),d.path=c.splice(0,f).join("?"),d.query=e.query2object(c.join("&")),d}}(),e.getPageBox=function(){var a=document.body,b=document.documentElement,c={scrollTop:Math.max(a.scrollTop,b.scrollTop),scrollLeft:Math.max(a.scrollLeft,b.scrollLeft),clientWidth:Math.max(a.clientWidth,a.offsetWidth,b.clientWidth,b.offsetWidth),clientHeight:Math.max(a.clientHeight,a.offsetHeight,b.clientHeight,b.offsetHeight)};return c.scrollWidth=Math.max(c.clientWidth,a.scrollWidth,b.scrollWidth),c.scrollHeight=Math.max(c.clientHeight,a.scrollHeight,b.scrollHeight),c}}),define("duokan/store/1/page/../widget/score/score",[],function(a,b,c){var e=(a("gallery/jquery/1.8.3/jquery"),a("../../core")),h=(a("../../common"),a("../../business"),a("gallery/juicer/0.6.4/juicer"));$$Event=a("../event");var i='<ul class="five">               {@each i in range(0,5)}                 <li class="${ list[i] }"></li>               {@/each}             </ul>',j=e.create(),k=j.extend($$Event);k.init=function(a,b){this.supInit(arguments),this.score=a,this.tpl=b,this.format();var c=this.math(this.score),d=this.translate(c);this._$final=h(this.tpl||i,{list:d,score:this.score})},k.format=function(){this.score>10&&(this.score=10),0>this.score&&(this.score=0)},k.math=function(a){var b,c=0;return a>=2&&2.5>a&&(c=1),a>=2.5&&7.5>a&&(b=Math.floor(a)+.5,b=a>=b?b:b-1,c=(b-2.5)/2+1.5),a>=7.5&&9.5>a&&(b=Math.floor(a)+.5,b=a>=b?b:b-1,c=b-7.5+4),a>=9.5&&(c=5),c},k.translate=function(a){var b={1:"red",.5:"halfive"},c=[1,.5],d=[];for(c.forEach(function(c){for(;a>c;)a-=c,d.push(b[c+""])});5>d.length;)d.push("");return d},k.toString=function(){return this._$final},c.exports=j}),define("duokan/store/1/page/../widget/event",[],function(a,b,c){var d=a("../core.js"),e=a("gallery/jquery/1.8.3/jquery"),f=d.create();f.prototype={constructor:f,init:function(){this.initEvent(arguments[0])},initEvent:function(a){if(this.__events={},a&&e.isPlainObject(a))for(var b in a)this.addEvent(b,a[b])},addEvent:function(){this.setEvent.apply(this,arguments)},setEvent:function(a,b){return a&&e.isFunction(b)&&(this.__events[a.toLowerCase()]=b),this},fireEvent:function(a){var b=this.__events[(a||"").toLowerCase()];if(!b)return this;var c=Array.prototype.slice.call(arguments,1);return e.isArray(b)?(b.forEach(function(a){try{a.apply(this,c)}catch(b){}},this),this):b.apply(this,c)},removeEvent:function(a){var a=(a||"").toLowerCase();if(a)delete this.__events[a];else for(var b in this.__events)this.removeEvent(b);return this},hasEvent:function(a){var b=this.__events[a.toLowerCase()];return!!b}},c.exports=f}),define("duokan/store/1/page/act_rank_sale",["../widget/loadmore/loadmore","../core","../common","../business","../util","../widget/score/score","../widget/event","gallery/jquery/1.8.3/jquery","gallery/juicer/0.6.4/juicer"],function(a){var d=a("../widget/loadmore/loadmore");new d({target:"paybook",tpl:"jst-more",offset:30,url:"/r/free"})});